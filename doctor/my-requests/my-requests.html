<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Requests - CardioAI</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ==================== CSS VARIABLES (Matches Dashboard) ==================== */
        :root {
            --primary-blue: #003785;
            --primary-green: #87af12;
            --light-green: #779f00;
            --danger-red: #de3b40;
            --warning-orange: #f59e0b;
            --teal: #1c8a8e;
            --white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-500: #6b7280;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --bg-light: #e8f0f8;
            --bg-sidebar: rgba(178, 215, 66, 0.56);
            --bg-ai-section: #f2f6fd;
            --shadow-sm: 0px 1px 3px rgba(0, 0, 0, 0.1);
            --radius-md: 8px;
            --radius-lg: 12px;
        }

        /* ==================== RESET & LAYOUT ==================== */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background-color: var(--white); height: 100vh; display: flex; overflow: hidden; }

        /* ==================== SIDEBAR ==================== */
        .sidebar {
            width: 270px; background: var(--bg-sidebar); height: 100%; flex-shrink: 0;
            display: flex; flex-direction: column; padding: 24px 16px; overflow-y: auto;
            border-right: 1px solid rgba(0,0,0,0.05); z-index: 20;
        }
        .sidebar-logo { margin-bottom: 40px; padding-left: 10px; cursor: pointer; }
        .nav-list { display: flex; flex-direction: column; gap: 8px; flex-grow: 1; }
        .nav-item {
            display: flex; align-items: center; gap: 12px; padding: 12px 16px;
            border-radius: var(--radius-md); color: var(--gray-700); text-decoration: none;
            font-weight: 500; font-size: 14px; transition: all 0.2s; cursor: pointer;
        }
        .nav-item:hover { background: rgba(255, 255, 255, 0.4); transform: translateX(4px); }
        .nav-item.active { background: rgba(0, 55, 133, 0.1); color: var(--primary-blue); }
        .nav-icon { width: 20px; height: 20px; object-fit: contain; }
        .ai-promo {
            margin-top: auto; background: var(--white); border-radius: 20px; padding: 15px;
            display: flex; align-items: center; gap: 10px; border: 1px dashed #ccc; cursor: pointer;
        }

        /* ==================== MAIN CONTENT ==================== */
        .main-content {
            flex-grow: 1; height: 100vh; background-color: var(--bg-light);
            display: flex; flex-direction: column; overflow: hidden;
        }

        header {
            flex-shrink: 0; display: flex; justify-content: space-between; align-items: center;
            padding: 24px 32px; background-color: var(--bg-light); z-index: 10;
        }
        .header-text h1 { color: var(--primary-blue); font-size: 28px; font-weight: 700; margin-bottom: 4px; }
        .header-text p { color: var(--gray-500); font-size: 16px; }

        .scrollable-content {
            flex-grow: 1; overflow-y: auto; padding: 0 32px 24px 32px;
            display: flex; flex-direction: column; gap: 24px;
        }

        /* ==================== STATS CARDS ==================== */
        .stats-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;
        }
        @media(max-width: 1000px) { .stats-grid { grid-template-columns: 1fr 1fr; } }

        .stat-card {
            background: var(--white); padding: 20px; border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); display: flex; flex-direction: column; justify-content: space-between;
            border-left: 4px solid transparent; cursor: pointer; transition: transform 0.2s;
        }
        .stat-card:hover { transform: translateY(-3px); }
        .stat-card.active { background: #fff; border-color: var(--primary-blue); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        
        .stat-icon { width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 12px; }
        .stat-icon.pending { background: #eff6ff; color: var(--primary-blue); }
        .stat-icon.urgent { background: #fef2f2; color: var(--danger-red); }
        .stat-icon.review { background: #fffbeb; color: var(--warning-orange); }
        .stat-icon.completed { background: #f0fdf4; color: var(--primary-green); }

        .stat-value { font-size: 24px; font-weight: 700; color: var(--gray-800); }
        .stat-label { font-size: 14px; color: var(--gray-500); }

        /* ==================== TABS & LIST ==================== */
        .tabs-container {
            display: flex; gap: 10px; margin-bottom: 10px; overflow-x: auto;
        }
        .tab-btn {
            padding: 8px 16px; background: transparent; border: 1px solid var(--gray-300);
            border-radius: 20px; cursor: pointer; font-size: 14px; color: var(--gray-500); font-weight: 500;
            transition: all 0.2s;
        }
        .tab-btn.active { background: var(--primary-blue); color: white; border-color: var(--primary-blue); }

        .request-card {
            background: var(--white); border-radius: var(--radius-lg); padding: 20px; margin-bottom: 16px;
            box-shadow: var(--shadow-sm); display: flex; justify-content: space-between; align-items: center;
            flex-wrap: wrap; gap: 20px; border: 1px solid transparent;
        }
        .request-card:hover { border-color: var(--primary-blue); }
        .request-card.urgent { border-left: 4px solid var(--danger-red); }

        .req-info { display: flex; align-items: flex-start; gap: 16px; flex: 1; min-width: 300px; }
        .req-icon { width: 48px; height: 48px; object-fit: contain; }
        
        .req-details h3 { font-size: 16px; font-weight: 600; color: var(--gray-800); margin-bottom: 4px; }
        .req-details p { font-size: 14px; color: var(--gray-500); margin-bottom: 8px; line-height: 1.5; }
        .req-meta { display: flex; align-items: center; gap: 12px; font-size: 12px; color: var(--gray-500); }
        
        .badge { padding: 4px 10px; border-radius: 4px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
        .badge.high { background: #fee2e2; color: #991b1b; }
        .badge.medium { background: #fff7ed; color: #c2410c; }
        .badge.pending { background: #f3f4f6; color: #374151; }

        .btn-review {
            background: var(--primary-blue); color: white; border: none; padding: 10px 24px;
            border-radius: 6px; cursor: pointer; font-weight: 500; transition: background 0.2s;
        }
        .btn-review:hover { background: #002a66; }

        /* ==================== MODAL STYLES ==================== */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6); z-index: 100; backdrop-filter: blur(2px);
            justify-content: center; align-items: center;
        }
        .modal-overlay.active { display: flex; }

        .modal-content {
            background: white; width: 90%; max-width: 600px; border-radius: 12px;
            padding: 30px; position: relative; max-height: 90vh; overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .modal-title { font-size: 20px; font-weight: 700; color: var(--primary-blue); display: flex; align-items: center; gap: 10px; }
        .close-modal { background: none; border: none; font-size: 24px; color: var(--gray-500); cursor: pointer; }

        .modal-body { margin-bottom: 24px; }
        .modal-row { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 14px; }
        .label { color: var(--gray-500); }
        .value { font-weight: 600; color: var(--gray-800); }
        
        .notes-area {
            width: 100%; min-height: 100px; border: 1px solid var(--gray-300); border-radius: 8px;
            padding: 12px; font-family: 'Inter', sans-serif; margin-top: 10px; resize: vertical;
        }

        .modal-footer { display: flex; justify-content: flex-end; gap: 12px; border-top: 1px solid var(--gray-200); padding-top: 20px; }
        .btn-cancel { background: transparent; border: 1px solid var(--gray-300); color: var(--gray-700); padding: 10px 20px; border-radius: 6px; cursor: pointer; }
        .btn-reject { background: white; border: 1px solid var(--danger-red); color: var(--danger-red); padding: 10px 20px; border-radius: 6px; cursor: pointer; }
        .btn-approve { background: var(--primary-green); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; }

        /* Footer & Chat */
        footer { flex-shrink: 0; padding: 16px 32px; background-color: var(--bg-light); border-top: 1px solid rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; }
        .floating-chat { position: fixed; bottom: 80px; right: 30px; width: 60px; height: 60px; background: #0a66f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(10, 102, 240, 0.4); cursor: pointer; z-index: 90; transition: transform 0.3s; border: none; }
        .floating-chat:hover { transform: scale(1.1); }

                             /* Edits */
        /* Chat Bot Icon */
.chat-bot-icon {
    position: fixed;
    bottom: 80px;
    right: 32px;
    width: 60px;
    height: 60px;
    background: #003785;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0px 4px 12px rgba(0, 55, 133, 0.3);
    transition: all 0.3s;
    z-index: 999;
    overflow: hidden;
    padding: 8px;
}

.chat-bot-icon:hover {
    background: #6b9137;
    transform: scale(1.1);
    box-shadow: 0px 6px 16px rgba(0, 0, 0, 0.2);
}

#chatBotImage {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 50%;
}
    </style>
</head>
<body>

   <nav class="sidebar">
        <div class="sidebar-logo" onclick="window.location.href='../dashboadrd/dashboard.html'">
            <h2 style="color:var(--primary-blue); font-weight:800; font-family:'Poppins', sans-serif;">Cardio<span style="color:var(--primary-green)">AI</span></h2>
        </div>

        <div class="nav-list">
            <div class="nav-item" onclick="window.location.href='../dashboadrd/dashboard.html'">
                <img src="Home 3.png" class="nav-icon" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1946/1946488.png'">
                <span>Dashboard</span>
            </div>
            
            <div class="nav-item" onclick="window.location.href='../patient-search/patient-search/patient-search.html'">
                <img src="Search.png" class="nav-icon" onerror="this.src='https://cdn-icons-png.flaticon.com/512/149/149852.png'">
                <span>Patient Search</span>
            </div>
            
            <div class="nav-item" onclick="window.location.href='../my-patients/my-patients.html'">
                <img src="Users.png" class="nav-icon" onerror="this.src='https://cdn-icons-png.flaticon.com/512/681/681494.png'">
                <span>My Patients</span>
            </div>
            
            <div class="nav-item active" onclick="window.location.href='my-requests.html'">
                <img src="File text.png" class="nav-icon" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1150/1150612.png'">
                <span>Requests</span>
            </div>
            
            <div class="nav-item" onclick="window.location.href='../schedule/schedule.html'">
                <img src="Schedule.png" class="nav-icon" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2693/2693507.png'">
                <span>Schedule</span>
            </div>
        </div>

        <!-- <div class="ai-promo" onclick="alert('AI Chatbot Opening...')">
            <img src="cardiochat.png" style="width:40px; height:40px; border-radius:50%;" onerror="this.src='https://cdn-icons-png.flaticon.com/512/4712/4712035.png'">
            <div>
                <span style="color:var(--primary-blue); font-weight:bold; display:block;">AI</span>
                <span style="color:var(--primary-green); font-weight:bold;">Chatbot</span>
            </div>
        </div> -->
    </nav>

    <main class="main-content">
        
        <header>
            <div class="header-text">
                <h1>Patient Requests</h1>
                <p>Review and respond to patient requests</p>
            </div>
            <div style="display:flex; align-items:center; gap:10px;">
                <span style="font-weight:600; color:var(--primary-blue);">Dr. Abeer</span>
                <img src="Avatar.png" style="width:40px; height:40px; border-radius:50%;" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'">
            </div>
        </header>

        <div class="scrollable-content">
            
            <div class="stats-grid">
                <div class="stat-card active" onclick="filterRequests('pending')">
                    <div class="stat-icon pending"><img src="Pending.png" width="20" onerror="this.style.display='none'"></div>
                    <div>
                        <div class="stat-value">8</div>
                        <div class="stat-label">Pending Review</div>
                    </div>
                </div>
                <div class="stat-card" onclick="filterRequests('urgent')">
                    <div class="stat-icon urgent"><img src="Urgent.png" width="20" onerror="this.style.display='none'"></div>
                    <div>
                        <div class="stat-value">4</div>
                        <div class="stat-label">Urgent Action</div>
                    </div>
                </div>
                <div class="stat-card" onclick="filterRequests('review')">
                    <div class="stat-icon review"><img src="In Review.png" width="20" onerror="this.style.display='none'"></div>
                    <div>
                        <div class="stat-value">1</div>
                        <div class="stat-label">In Review</div>
                    </div>
                </div>
                <div class="stat-card" onclick="filterRequests('completed')">
                    <div class="stat-icon completed"><img src="Completed1.png" width="20" onerror="this.style.display='none'"></div>
                    <div>
                        <div class="stat-value">3</div>
                        <div class="stat-label">Completed Today</div>
                    </div>
                </div>
            </div>

            <div class="tabs-container">
                <button class="tab-btn active" onclick="filterRequests('all')">All Requests</button>
                <button class="tab-btn" onclick="filterRequests('urgent')">Urgent</button>
                <button class="tab-btn" onclick="filterRequests('lab')">Lab Results</button>
                <button class="tab-btn" onclick="filterRequests('refill')">Prescriptions</button>
            </div>

            <div class="requests-list">
                
                <div class="request-card urgent" data-category="urgent lab">
                    <div class="req-info">
                        <img src="Lab Results Review.png" class="req-icon" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2965/2965301.png'">
                        <div class="req-details">
                            <div style="display:flex; justify-content:space-between; width:100%;">
                                <h3>Michael Chen <span style="font-size:12px; font-weight:400; color:#666;">• Lab Results Review</span></h3>
                                <span class="badge high">High Priority</span>
                            </div>
                            <p>Recent blood work shows elevated glucose levels. HbA1c: 7.2%. Please review and advise.</p>
                            <div class="req-meta">
                                <span><img src="clock.png" width="12"> 2 hours ago</span>
                                <span class="badge pending">Pending</span>
                            </div>
                        </div>
                    </div>
                    <button class="btn-review">Review</button>
                </div>

                <div class="request-card" data-category="refill">
                    <div class="req-info">
                        <img src="Prescription Refill Request.png" class="req-icon" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1531/1531238.png'">
                        <div class="req-details">
                            <div style="display:flex; justify-content:space-between; width:100%;">
                                <h3>Sarah Johnson <span style="font-size:12px; font-weight:400; color:#666;">• Prescription Refill</span></h3>
                                <span class="badge medium">Medium Priority</span>
                            </div>
                            <p>Requesting refill for Lisinopril 10mg. Current prescription expires in 3 days.</p>
                            <div class="req-meta">
                                <span><img src="clock.png" width="12"> 1/15/2024 12:30 PM</span>
                                <span class="badge pending">Pending</span>
                            </div>
                        </div>
                    </div>
                    <button class="btn-review" onclick="showRefillModal()">Review</button>
                </div>

                <div class="request-card urgent" data-category="urgent">
                    <div class="req-info">
                        <img src="calendar_review.png" class="req-icon" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2693/2693507.png'">
                        <div class="req-details">
                            <div style="display:flex; justify-content:space-between; width:100%;">
                                <h3>Emily Davis <span style="font-size:12px; font-weight:400; color:#666;">• Emergency Appointment</span></h3>
                                <span class="badge high">Urgent</span>
                            </div>
                            <p>Experiencing severe asthma symptoms. Inhaler not providing relief. Need urgent consultation.</p>
                            <div class="req-meta">
                                <span><img src="clock.png" width="12"> 30 mins ago</span>
                                <span style="background:#fffbeb; color:#d97706; padding:2px 6px; border-radius:4px;">In Review</span>
                            </div>
                        </div>
                    </div>
                    <button class="btn-review">Continue Review</button>
                </div>

            </div>

        </div> <footer>
            <div>
                <h3 style="color:var(--primary-blue); margin-bottom:5px;">Cardio<span style="color:var(--primary-green)">AI</span></h3>
                <span style="font-size:12px; color:var(--gray-500);">© 2025 CardioAI System</span>
            </div>
            <button style="background:transparent; color:var(--danger-red); border:1px solid var(--danger-red); padding:8px 16px; border-radius:6px; cursor:pointer;" onclick="if(confirm('Log out?')) window.location.href='login.html'">Log out</button>
        </footer>
    </main>

                <!-- Chat Bot Icon - صورة بدل الأيقونة -->
            <div class="chat-bot-icon" id="chatBotBtn" onclick="window.location.href='../../cahtbot/mainpage.html'">
                <!-- يمكنك استبدال chatbot.png بالصورة الخاصة بك -->
                <img src="chatbot.png" alt="Chat Bot" id="chatBotImage">
            </div>

    <div class="modal-overlay" id="refillModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <img src="pin.png" width="20" style="opacity:0.6" onerror="this.style.display='none'">
                    Prescription Refill Request
                </div>
                <button class="close-modal" onclick="closeRefillModal()">×</button>
            </div>

            <div class="modal-body">
                <div style="background:var(--bg-light); padding:10px; border-radius:6px; margin-bottom:20px; font-size:13px; color:var(--gray-700);">
                    Request from <strong>Sarah Johnson</strong> • 1/15/2024 12:30 PM
                </div>

                <div class="modal-row">
                    <span class="label">Priority:</span>
                    <span class="badge medium">Medium</span>
                </div>
                <div class="modal-row">
                    <span class="label">Status:</span>
                    <span class="badge pending">Pending</span>
                </div>

                <div style="margin-top:20px;">
                    <h4 style="font-size:14px; margin-bottom:8px;">Request Details</h4>
                    <p style="font-size:14px; color:var(--gray-700); background:#f9f9f9; padding:12px; border-radius:8px;">
                        Requesting refill for Lisinopril 10mg. Current prescription expires in 3 days.
                    </p>
                </div>

                <div style="margin-top:20px;">
                    <h4 style="font-size:14px; margin-bottom:8px;">Response / Notes</h4>
                    <textarea class="notes-area" id="modalNotes" placeholder="Enter your response or notes for this request..."></textarea>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeRefillModal()">Cancel</button>
                <button class="btn-reject" onclick="handleAction('reject')">Reject Request</button>
                <button class="btn-approve" onclick="handleAction('approve')">Approve Request</button>
            </div>
        </div>
    </div>

    <script>
        // Modal Logic
        const modal = document.getElementById('refillModal');
        const notesField = document.getElementById('modalNotes');

        function showRefillModal() {
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeRefillModal() {
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function handleAction(action) {
            const notes = notesField.value;
            if(action === 'approve') {
                alert('Request Approved ✅\nNotes sent to patient.');
            } else {
                if(confirm('Are you sure you want to reject this request?')) {
                    alert('Request Rejected ❌');
                } else {
                    return;
                }
            }
            closeRefillModal();
        }

        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeRefillModal();
        });

        // Simple Tab Filter Logic (Visual Only)
        function filterRequests(filter) {
            // Update Tab Active State
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');

            // Filter Items
            const items = document.querySelectorAll('.request-card');
            items.forEach(item => {
                if (filter === 'all') {
                    item.style.display = 'flex';
                } else {
                    const category = item.getAttribute('data-category');
                    if (category && category.includes(filter)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                }
            });
        }
    </script>
</body>
</html>